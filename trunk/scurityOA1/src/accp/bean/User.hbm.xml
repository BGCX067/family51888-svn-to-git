<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="accp.bean.User" table="user" catalog="scurityOA">
        <id name="id" type="long">
            <column name="id" />
            <generator class="native" />
        </id>
        <property name="username" type="string">
            <column name="username" length="50" />
        </property>
        
         <property name="name" type="string">
            <column name="name" length="50" />
         </property>
        <!-- 多个员工对应一个部门 -->
        <many-to-one name="department_id" class="accp.bean.Department"
        column="department_id"  lazy="false"/>
     
        <!-- 多个员工对应一个职位-->
        <many-to-one name="position_id" class="accp.bean.Position" 
        column="position_id" lazy="false"/> 
        
        
        
        <property name="password" type="string">
            <column name="password" length="50" />
        </property>
        <property name="status" type="integer" >
            <column name="status" default="1"/>
        </property>
        <property name="descn" type="string">
            <column name="descn" length="200" />
        </property>
        <!-- name： set集合名字
             table：实现多对多的 中间关系表名
             key column: 中间关系表中 (一个用户对应多个角色) 现在一的这端ID 
             many-to-many entity-name: 对应多个角色     角色实体类路径
             many-to-many column:对应多个角色  多的那端  在关系表中的id
                                总结:多个用户对应多个角色  
                                会拆成 一个用户对应多个角色 ，一个角色对应多个用户
                                需要和中间关系表对应 一对多关系 
                                从而形成多个用户对应多个角色的关系    
             cascade:级联操作 
             lazy：懒加载=false 第一次查询的时候会 自动查询关联所有的对象                        
             -->
        <set name="roles" table="user_role"  lazy="false">
            <key>
                <column name="user_id" not-null="true" />
            </key>
            <many-to-many entity-name="accp.bean.Role">
                <column name="role_id" not-null="true" />
            </many-to-many>
        </set>
    </class>
</hibernate-mapping>
